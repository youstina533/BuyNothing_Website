<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Groups - Buy Nothing</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="images/logo.png" alt="Buy Nothing Logo" height="40">
                <span class="ms-2 fw-bold text-primary">Buy Nothing</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="dashboard.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="groups.html">Find Groups</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="rules.html">Rules</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="customer-service.html">Help</a>
                    </li>
                </ul>
                <div class="d-flex">
                    <div class="dropdown me-2">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-globe"></i> English
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="languageDropdown">
                            <li><a class="dropdown-item active" href="#">English</a></li>
                            <li><a class="dropdown-item" href="#">العربية</a></li>
                            <li><a class="dropdown-item" href="#">Español</a></li>
                            <li><a class="dropdown-item" href="#">Français</a></li>
                        </ul>
                    </div>
                    <!-- User dropdown for logged in users -->
                    <div class="dropdown d-none" id="user-dropdown">
                        <button class="btn btn-link p-0 text-dark dropdown-toggle d-flex align-items-center" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <img src="https://via.placeholder.com/40" class="rounded-circle me-2" alt="Profile Picture">
                            <span class="d-none d-md-inline" id="username-display">User</span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            <li><a class="dropdown-item" href="profile.html"><i class="fas fa-user me-2"></i> My Profile</a></li>
                            <li><a class="dropdown-item" href="settings.html"><i class="fas fa-cog me-2"></i> Settings</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" id="logout-btn"><i class="fas fa-sign-out-alt me-2"></i> Logout</a></li>
                        </ul>
                    </div>
                    <!-- Login/Register buttons for guests -->
                    <div id="auth-buttons">
                        <a href="login.html" class="btn btn-outline-primary me-2">Login</a>
                        <a href="register.html" class="btn btn-primary">Sign Up</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="bg-primary text-white py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold mb-3">Find Your Local Group</h1>
                    <p class="lead mb-4">Connect with neighbors in your area to share, give, and receive.</p>
                    <div class="search-box bg-white p-2 rounded shadow-sm">
                        <form id="locationSearchForm" class="d-flex">
                            <input type="text" class="form-control border-0 me-2" id="locationSearch" placeholder="Enter your city, neighborhood, or zip code">
                            <button class="btn btn-primary" type="submit">
                                <i class="fas fa-search"></i>
                            </button>
                        </form>
                    </div>
                </div>
                <div class="col-lg-6 d-none d-lg-block">
                    <img src="https://via.placeholder.com/600x400" alt="Community Map" class="img-fluid rounded shadow">
                </div>
            </div>
        </div>
    </section>

    <!-- Map Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-header bg-white">
                            <h4 class="mb-0">Find Groups Near You</h4>
                        </div>
                        <div class="card-body">
                            <p>Use the map to find Buy Nothing groups in your area. Click on a marker to see group details.</p>
                            <div class="mb-3">
                                <label for="searchRadius" class="form-label">Search radius (km)</label>
                                <input type="range" class="form-range" min="1" max="50" value="10" id="searchRadius">
                                <div class="d-flex justify-content-between">
                                    <span>1 km</span>
                                    <span id="radiusValue">10 km</span>
                                    <span>50 km</span>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Filter by:</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="filterActive" checked>
                                    <label class="form-check-label" for="filterActive">
                                        Active groups
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="filterNew" checked>
                                    <label class="form-check-label" for="filterNew">
                                        New groups
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="filterForming">
                                    <label class="form-check-label" for="filterForming">
                                        Forming groups
                                    </label>
                                </div>
                            </div>
                            <button class="btn btn-primary w-100" id="useMyLocation">
                                <i class="fas fa-map-marker-alt me-2"></i> Use My Location
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8">
                    <div class="card border-0 shadow-sm">
                        <div class="card-body p-0">
                            <div id="map" style="height: 500px;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Search Results Section -->
    <section class="py-5">
        <div class="container">
            <h2 class="mb-4">Groups Near You</h2>
            <div class="row g-4" id="groupResults">
                <!-- Group Card 1 -->
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="flex-shrink-0">
                                    <img src="https://via.placeholder.com/50" class="rounded-circle" alt="Group Image">
                                </div>
                                <div class="ms-3">
                                    <h5 class="mb-0">Downtown Cairo</h5>
                                    <span class="badge bg-success me-1">Active</span>
                                    <small class="text-muted">3,245 members</small>
                                </div>
                            </div>
                            <p class="card-text">A vibrant community of neighbors sharing items and services in downtown Cairo.</p>
                            <div class="d-flex align-items-center mb-3">
                                <i class="fas fa-map-marker-alt text-danger me-2"></i>
                                <span>2.3 km away</span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <button class="btn btn-primary" onclick="joinGroup(1)">Join Group</button>
                                <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#groupInfoModal" data-group-id="1">
                                    <i class="fas fa-info-circle"></i> Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Group Card 2 -->
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="flex-shrink-0">
                                    <img src="https://via.placeholder.com/50" class="rounded-circle" alt="Group Image">
                                </div>
                                <div class="ms-3">
                                    <h5 class="mb-0">Maadi Community</h5>
                                    <span class="badge bg-success me-1">Active</span>
                                    <small class="text-muted">1,876 members</small>
                                </div>
                            </div>
                            <p class="card-text">A friendly community of neighbors in Maadi sharing items and reducing waste together.</p>
                            <div class="d-flex align-items-center mb-3">
                                <i class="fas fa-map-marker-alt text-danger me-2"></i>
                                <span>5.7 km away</span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <button class="btn btn-primary" onclick="joinGroup(2)">Join Group</button>
                                <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#groupInfoModal" data-group-id="2">
                                    <i class="fas fa-info-circle"></i> Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Group Card 3 -->
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="flex-shrink-0">
                                    <img src="https://via.placeholder.com/50" class="rounded-circle" alt="Group Image">
                                </div>
                                <div class="ms-3">
                                    <h5 class="mb-0">New Cairo</h5>
                                    <span class="badge bg-success me-1">Active</span>
                                    <small class="text-muted">2,543 members</small>
                                </div>
                            </div>
                            <p class="card-text">Connect with neighbors in New Cairo to share resources and build community.</p>
                            <div class="d-flex align-items-center mb-3">
                                <i class="fas fa-map-marker-alt text-danger me-2"></i>
                                <span>8.2 km away</span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <button class="btn btn-primary" onclick="joinGroup(3)">Join Group</button>
                                <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#groupInfoModal" data-group-id="3">
                                    <i class="fas fa-info-circle"></i> Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Group Card 4 -->
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="flex-shrink-0">
                                    <img src="https://via.placeholder.com/50" class="rounded-circle" alt="Group Image">
                                </div>
                                <div class="ms-3">
                                    <h5 class="mb-0">Heliopolis Community</h5>
                                    <span class="badge bg-success me-1">Active</span>
                                    <small class="text-muted">1,987 members</small>
                                </div>
                            </div>
                            <p class="card-text">Join neighbors in Heliopolis to share items and build a stronger community.</p>
                            <div class="d-flex align-items-center mb-3">
                                <i class="fas fa-map-marker-alt text-danger me-2"></i>
                                <span>6.8 km away</span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <button class="btn btn-primary" onclick="joinGroup(4)">Join Group</button>
                                <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#groupInfoModal" data-group-id="4">
                                    <i class="fas fa-info-circle"></i> Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Group Card 5 -->
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="flex-shrink-0">
                                    <img src="https://via.placeholder.com/50" class="rounded-circle" alt="Group Image">
                                </div>
                                <div class="ms-3">
                                    <h5 class="mb-0">Zamalek Neighbors</h5>
                                    <span class="badge bg-success me-1">Active</span>
                                    <small class="text-muted">1,456 members</small>
                                </div>
                            </div>
                            <p class="card-text">A community of neighbors in Zamalek sharing items and services locally.</p>
                            <div class="d-flex align-items-center mb-3">
                                <i class="fas fa-map-marker-alt text-danger me-2"></i>
                                <span>4.1 km away</span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <button class="btn btn-primary" onclick="joinGroup(5)">Join Group</button>
                                <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#groupInfoModal" data-group-id="5">
                                    <i class="fas fa-info-circle"></i> Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Group Card 6 -->
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="flex-shrink-0">
                                    <img src="https://via.placeholder.com/50" class="rounded-circle" alt="Group Image">
                                </div>
                                <div class="ms-3">
                                    <h5 class="mb-0">6th of October</h5>
                                    <span class="badge bg-warning me-1">Forming</span>
                                    <small class="text-muted">78 members</small>
                                </div>
                            </div>
                            <p class="card-text">New group forming for 6th of October City residents. Join to help build this community!</p>
                            <div class="d-flex align-items-center mb-3">
                                <i class="fas fa-map-marker-alt text-danger me-2"></i>
                                <span>15.3 km away</span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <button class="btn btn-primary" onclick="joinGroup(6)">Join Group</button>
                                <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#groupInfoModal" data-group-id="6">
                                    <i class="fas fa-info-circle"></i> Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Load More Button -->
            <div class="text-center mt-4">
                <button class="btn btn-outline-primary" id="loadMoreGroups">
                    <i class="fas fa-sync-alt me-2"></i> Load More Groups
                </button>
            </div>
        </div>
    </section>

    <!-- Create Group Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <h2 class="mb-4">Start Your Own Group</h2>
                    <p class="lead mb-4">Don't see a group in your area? Start one and help build a sharing community in your neighborhood!</p>
                    <ul class="list-unstyled mb-4">
                        <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> Connect with neighbors</li>
                        <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> Reduce waste in your community</li>
                        <li class="mb-2"><i class="fas fa-check-circle text-success me-2"></i> Share resources and skills</li>
                        <li><i class="fas fa-check-circle text-success me-2"></i> Build meaningful local relationships</li>
                    </ul>
                    <button class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#createGroupModal">
                        <i class="fas fa-plus-circle me-2"></i> Start a Group
                    </button>
                </div>
                <div class="col-lg-6">
                    <img src="https://via.placeholder.com/600x400" alt="Start a Group" class="img-fluid rounded shadow">
                </div>
            </div>
        </div>
    </section>

    <!-- Group Info Modal -->
    <div class="modal fade" id="groupInfoModal" tabindex="-1" aria-labelledby="groupInfoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="groupInfoModalLabel">Group Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4 mb-3 mb-md-0">
                            <img src="https://via.placeholder.com/300" class="img-fluid rounded" alt="Group Image">
                            <div class="mt-3">
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-users text-primary me-2"></i>
                                    <span id="groupMemberCount">3,245 members</span>
                                </div>
                                <div class="d-flex align-items-center mb-2">
                                    <i class="fas fa-calendar-alt text-primary me-2"></i>
                                    <span id="groupCreated">Created January 2020</span>
                                </div>
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-map-marker-alt text-primary me-2"></i>
                                    <span id="groupLocation">Downtown Cairo</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <h4 id="groupName">Downtown Cairo</h4>
                            <div class="mb-3">
                                <span class="badge bg-success me-1">Active</span>
                                <span class="badge bg-primary">Verified</span>
                            </div>
                            <h6>About this group</h6>
                            <p id="groupDescription">A vibrant community of neighbors sharing items and services in downtown Cairo. Our group focuses on reducing waste, building community connections, and helping each other through gifting and sharing.</p>
                            <h6>Group Rules</h6>
                            <ul class="mb-4">
                                <li>Be kind and respectful to all members</li>
                                <li>No selling, bartering, or monetary exchanges</li>
                                <li>All items must be given freely</li>
                                <li>Keep personal information private</li>
                                <li>Follow the community guidelines</li>
                            </ul>
                            <h6>Group Admins</h6>
                            <div class="d-flex mb-3">
                                <img src="https://via.placeholder.com/40" class="rounded-circle me-2" alt="Admin">
                                <div>
                                    <p class="mb-0">Sarah Ahmed</p>
                                    <small class="text-muted">Lead Admin</small>
                                </div>
                            </div>
                            <div class="d-flex">
                                <img src="https://via.placeholder.com/40" class="rounded-circle me-2" alt="Admin">
                                <div>
                                    <p class="mb-0">Mohamed Hassan</p>
                                    <small class="text-muted">Admin</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="joinGroupModal">Join Group</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Group Modal -->
    <div class="modal fade" id="createGroupModal" tabindex="-1" aria-labelledby="createGroupModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createGroupModalLabel">Start a New Group</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="mb-4">Starting a new Buy Nothing group is a wonderful way to build community in your area. As a group admin, you'll help facilitate sharing and connections among neighbors.</p>
                    
                    <form id="createGroupForm">
                        <div class="mb-3">
                            <label for="groupName" class="form-label">Group Name</label>
                            <input type="text" class="form-control" id="newGroupName" placeholder="e.g., Downtown Cairo Buy Nothing" required>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="groupLocation" class="form-label">Location</label>
                                <input type="text" class="form-control" id="newGroupLocation" placeholder="Neighborhood or area" required>
                            </div>
                            <div class="col-md-6">
                                <label for="groupRadius" class="form-label">Group Radius (km)</label>
                                <input type="number" class="form-control" id="groupRadius" min="1" max="20" value="5" required>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="groupDescription" class="form-label">Group Description</label>
                            <textarea class="form-control" id="newGroupDescription" rows="3" placeholder="Describe your group and community..." required></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Group Rules</label>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="rule1" checked disabled>
                                <label class="form-check-label" for="rule1">
                                    Follow the Buy Nothing Project guidelines
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="rule2" checked disabled>
                                <label class="form-check-label" for="rule2">
                                    No buying, selling, or bartering
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="rule3" checked disabled>
                                <label class="form-check-label" for="rule3">
                                    Be respectful to all community members
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="customRules">
                                <label class="form-check-label" for="customRules">
                                    Add custom rules for your group
                                </label>
                            </div>
                            <div class="mt-2 d-none" id="customRulesSection">
                                <textarea class="form-control" id="customRulesText" rows="3" placeholder="Enter your custom group rules..."></textarea>
                            </div>
                        </div>
                        
                        <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" id="adminAgreement" required>
                            <label class="form-check-label" for="adminAgreement">
                                I agree to serve as an admin for this group and follow the Buy Nothing Project guidelines
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="submitNewGroup">Create Group</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-4">
                    <h5 class="mb-3">Buy Nothing</h5>
                    <p class="mb-3">A global movement where people give and receive freely, reducing waste and building community.</p>
                    <div class="social-icons">
                        <a href="#" class="text-white me-2"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-white me-2"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-white me-2"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-6">
                    <h5 class="mb-3">Quick Links</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="index.html" class="text-white text-decoration-none">Home</a></li>
                        <li class="mb-2"><a href="about.html" class="text-white text-decoration-none">About Us</a></li>
                        <li class="mb-2"><a href="groups.html" class="text-white text-decoration-none">Find Groups</a></li>
                        <li class="mb-2"><a href="rules.html" class="text-white text-decoration-none">Rules</a></li>
                        <li><a href="customer-service.html" class="text-white text-decoration-none">Help</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-3 col-6">
                    <h5 class="mb-3">Resources</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Blog</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">FAQ</a></li>
                        <li class="mb-2"><a href="volunteer.html" class="text-white text-decoration-none">Volunteer</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Community Events</a></li>
                        <li><a href="#" class="text-white text-decoration-none">Local Resources</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 col-md-6">
                    <h5 class="mb-3">Stay Connected</h5>
                    <p>Subscribe to our newsletter for updates and news.</p>
                    <form class="mb-3">
                        <div class="input-group">
                            <input type="email" class="form-control" placeholder="Your email" aria-label="Your email" required>
                            <button class="btn btn-primary" type="submit">Subscribe</button>
                        </div>
                    </form>
                    <p class="mb-0"><i class="fas fa-phone me-2"></i> Customer Service: +1 (555) 123-4567</p>
                    <p><i class="fas fa-envelope me-2"></i> support@buynothing.org</p>
                </div>
            </div>
            <hr class="my-4">
            <div class="row">
                <div class="col-md-6 mb-3 mb-md-0">
                    <p class="mb-0">&copy; 2023 Buy Nothing Project. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a href="#" class="text-white text-decoration-none me-3">Privacy Policy</a>
                    <a href="#" class="text-white text-decoration-none me-3">Terms of Service</a>
                    <a href="#" class="text-white text-decoration-none">Cookie Policy</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
    <!-- Custom JS -->
    <script src="js/main.js"></script>
    <script src="js/maps.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize map
            if (typeof L !== 'undefined' && document.getElementById('map')) {
                const map = L.map('map').setView([30.0444, 31.2357], 12); // Default to Cairo
                
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);
                
                // Add markers for groups
                const groups = [
                    { id: 1, name: "Downtown Cairo", lat: 30.0444, lng: 31.2357, members: 3245, status: "active" },
                    { id: 2, name: "Maadi Community", lat: 29.9559, lng: 31.2497, members: 1876, status: "active" },
                    { id: 3, name: "New Cairo", lat: 30.0330, lng: 31.4087, members: 2543, status: "active" },
                    { id: 4, name: "Heliopolis Community", lat: 30.0911, lng: 31.3425, members: 1987, status: "active" },
                    { id: 5, name: "Zamalek Neighbors", lat: 30.0609, lng: 31.2197, members: 1456, status: "active" },
                    { id: 6, name: "6th of October", lat: 29.9285, lng: 30.9188, members: 78, status: "forming" }
                ];
                
                groups.forEach(group => {
                    const marker = L.marker([group.lat, group.lng]).addTo(map);
                    marker.bindPopup(`
                        <strong>${group.name}</strong><br>
                        ${group.members} members<br>
                        <span class="badge ${group.status === 'active' ? 'bg-success' : 'bg-warning'}">${group.status.toUpperCase()}</span><br>
                        <button class="btn btn-sm btn-primary mt-2" onclick="joinGroup(${group.id})">Join Group</button>
                    `);
                });
                
                // Search radius slider
                const radiusSlider = document.getElementById('searchRadius');
                const radiusValue = document.getElementById('radiusValue');
                
                radiusSlider.addEventListener('input', function() {
                    radiusValue.textContent = `${this.value} km`;
                });
                
                // Use my location button
                document.getElementById('useMyLocation').addEventListener('click', function() {
                    if (navigator.geolocation) {
                        navigator.geolocation.getCurrentPosition(function(position) {
                            const lat = position.coords.latitude;
                            const lng = position.coords.longitude;
                            map.setView([lat, lng], 13);
                            
                            // Add a marker for user's location
                            const userMarker = L.marker([lat, lng]).addTo(map);
                            userMarker.bindPopup("Your Location").openPopup();
                            
                            // Draw a circle for the search radius
                            const radius = parseInt(radiusSlider.value) * 1000; // Convert to meters
                            L.circle([lat, lng], {
                                radius: radius,
                                color: 'blue',
                                fillColor: '#30f',
                                fillOpacity: 0.1
                            }).addTo(map);
                        });
                    } else {
                        alert("Geolocation is not supported by your browser.");
                    }
                });
            }
            
            // Location search form
            document.getElementById('locationSearchForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const searchTerm = document.getElementById('locationSearch').value;
                
                // In a real app, you would use a geocoding service here
                alert(`Searching for groups near: ${searchTerm}`);
                
                // Scroll to results
                document.getElementById('groupResults').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Custom rules toggle
            document.getElementById('customRules').addEventListener('change', function() {
                const customRulesSection = document.getElementById('customRulesSection');
                if (this.checked) {
                    customRulesSection.classList.remove('d-none');
                } else {
                    customRulesSection.classList.add('d-none');
                }
            });
            
            // Create group form submission
            document.getElementById('submitNewGroup').addEventListener('click', function() {
                const form = document.getElementById('createGroupForm');
                if (form.checkValidity()) {
                    alert('Thank you for starting a new group! Our team will review your application and contact you soon.');
                    document.getElementById('createGroupModal').classList.remove('show');
                    document.querySelector('.modal-backdrop').remove();
                    document.body.classList.remove('modal-open');
                    document.body.style.overflow = '';
                    document.body.style.paddingRight = '';
                } else {
                    form.reportValidity();
                }
            });
            
            // Group info modal dynamic content
            const groupInfoModal = document.getElementById('groupInfoModal');
            if (groupInfoModal) {
                groupInfoModal.addEventListener('show.bs.modal', function(event) {
                    const button = event.relatedTarget;
                    const groupId = button.getAttribute('data-group-id');
                    
                    // In a real app, you would fetch group details from an API
                    // For now, we'll use dummy data based on the group ID
                    const groupData = {
                        1: {
                            name: "Downtown Cairo",
                            members: "3,245",
                            created: "January 2020",
                            location: "Downtown Cairo",
                            description: "A vibrant community of neighbors sharing items and services in downtown Cairo. Our group focuses on reducing waste, building community connections, and helping each other through gifting and sharing."
                        },
                        2: {
                            name: "Maadi Community",
                            members: "1,876",
                            created: "March 2021",
                            location: "Maadi, Cairo",
                            description: "A friendly community of neighbors in Maadi sharing items and reducing waste together. We welcome all residents of Maadi who want to participate in the gift economy."
                        }
                    };
                    
                    // Set modal content based on group ID
                    const group = groupData[groupId] || groupData[1]; // Default to first group if not found
                    
                    document.getElementById('groupName').textContent = group.name;
                    document.getElementById('groupMemberCount').textContent = `${group.members} members`;
                    document.getElementById('groupCreated').textContent = `Created ${group.created}`;
                    document.getElementById('groupLocation').textContent = group.location;
                    document.getElementById('groupDescription').textContent = group.description;
                    
                    // Set join button action
                    document.getElementById('joinGroupModal').onclick = function() {
                        joinGroup(groupId);
                        const modal = bootstrap.Modal.getInstance(groupInfoModal);
                        modal.hide();
                    };
                });
            }
        });
        
        // Join group function
        function joinGroup(groupId) {
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            
            if (isLoggedIn) {
                alert(`You've successfully joined group #${groupId}! You'll now be redirected to the group page.`);
                // In a real app, we would redirect to the group page
                window.location.href = 'dashboard.html';
            } else {
                alert('Please log in or register to join a group');
                window.location.href = 'login.html';
            }
        }
    </script>
</body>
</html>